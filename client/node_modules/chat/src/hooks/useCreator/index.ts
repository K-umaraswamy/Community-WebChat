import { useRef, MutableRefObject } from 'react'
import { RoomCreatorRef } from '../../components/RoomCreator/types'

/**
 * React hook for managing RoomCreator component in usechat
 *
 * @returns An array with a ref and then convenience functions for the creator
 * [ref, { open, close }]
 *
 * **Required** In order for the methods to work, you must pass creator to sheetRef prop.
 *
 * @example
 * ```javascript
 * export default () => {
 * 	const [creator, { open, close }]
 *
 * 	// ...some other method
 *  const onPress = () => open()
 *
 * 	return <RoomCreator sheetRef={creator} />
 * }
 * ```
 */
export default (): [
	MutableRefObject<RoomCreatorRef | undefined>,
	{ open: () => void; close: () => void }
] => {
	const creator = useRef<RoomCreatorRef>()
	const open = () => creator.current && creator.current.open()
	const close = () => creator.current && creator.current.close()

	return [creator, { open, close }]
}
