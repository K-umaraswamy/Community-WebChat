import React, { useMemo, FunctionComponent } from 'react'
import { BubbleProps } from '../types'
import { View, Text, StyleSheet } from 'react-native'

const Bubble: FunctionComponent<BubbleProps> = props => {
	const containerStyles = useMemo(
		() => [
			styles.container,
			props.isMe ? meStyles.container : otherStyles.container,
			props.style
		],
		[props.style, props.isMe]
	)
	const textStyles = useMemo(
		() => [
			styles.text,
			props.isMe ? meStyles.text : otherStyles.text,
			props.style
		],
		[props.style, props.isMe]
	)
	return (
		<View style={containerStyles} ref={props.bubbleRef}>
			<Text style={textStyles}>{props.text}</Text>
		</View>
	)
}

export default Bubble

const styles = StyleSheet.create({
	container: {
		paddingHorizontal: 10,
		paddingVertical: 5,
		borderRadius: 10
	},
	text: {
		textAlign: 'left'
	}
})

const meStyles = StyleSheet.create({
	container: {
		backgroundColor: 'blue'
	},
	text: {
		color: 'white'
	}
})

const otherStyles = StyleSheet.create({
	container: {
		backgroundColor: 'lightgray'
	},
	text: {
		color: 'black'
	}
})
