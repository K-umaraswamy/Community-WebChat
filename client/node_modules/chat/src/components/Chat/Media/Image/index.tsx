import React, { useMemo } from 'react'
import { Image, Dimensions, ImageStyle } from 'react-native'
import { MessageMedia } from '../../../../classes/Message/types'

const Img = (props: Omit<MessageMedia, 'contentType'>) => {
	const dimensions = useMemo((): ImageStyle => {
		const aspectRatio = props.width / props.height
		const isVertical = props.height > props.width
		const { width: screenWidth } = Dimensions.get('window')
		const width = isVertical ? screenWidth * 0.6 : screenWidth * 0.7
		const height = width / aspectRatio

		return { height, width }
	}, [props.height, props.width])
	return (
		<Image
			source={{ uri: props.url || props.uri }}
			style={dimensions}
			resizeMode="cover"
		/>
	)
}

Img.displayName = 'Juice.Image'

export default React.memo(Img)
