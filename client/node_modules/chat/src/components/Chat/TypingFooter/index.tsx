import React, { useMemo } from 'react'
import { StyleSheet, View, Text } from 'react-native'
// import Juice from 'usechat'
import { TypingFooterProps } from '../types'
import TypingIndicator from '../../TypingIndicator'

export default React.memo(
	({
		typingText,
		containerStyle,
		numberOfUsersTyping,
		...indicatorProps
	}: TypingFooterProps) => {
		const extension = useMemo(() => {
			if (!numberOfUsersTyping) return ''
			return numberOfUsersTyping > 1 ? 'are' : 'is'
		}, [numberOfUsersTyping])
		return (
			<View style={[styles.container, containerStyle]}>
				<View style={styles.wrapper}>
					<TypingIndicator {...indicatorProps} />
					{!!typingText && !!numberOfUsersTyping && (
						<Text style={styles.text}>
							{typingText} {extension} typing...
						</Text>
					)}
				</View>
			</View>
		)
	}
)

const styles = StyleSheet.create({
	container: {
		alignItems: 'flex-start',
		padding: 10,
		paddingBottom: 5
	},
	wrapper: {
		flexDirection: 'row',
		alignItems: 'center'
	},
	text: {
		color: 'gray',
		fontStyle: 'italic',
		marginLeft: 10
	}
})
