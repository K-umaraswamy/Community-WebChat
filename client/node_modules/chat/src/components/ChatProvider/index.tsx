import React, { FunctionComponent } from 'react'
import { FuegoProvider, Fuego } from '@nandorojo/fuego'
import ChatContext from '../../ChatContext'
import { ChatProviderProps } from './types'
import Chat from '../../classes/Chat/index'

export let fuego: Fuego
export let chat: Chat

// useful for non-react projects that need to use this var too.
export const setFuego = (f: Fuego) => (fuego = f)
export const setChat = (c: Chat) => (chat = c)

const Provider: FunctionComponent<ChatProviderProps> = ({
	children,
	fuego: FuegoInstance,
	chat: ChatInstance = new Chat({})
}) => {
	setFuego(FuegoInstance)
	setChat(ChatInstance)
	// fuego = FuegoInstance
	// chat = ChatInstance

	return (
		<FuegoProvider fuego={fuego}>
			<ChatContext.Provider>{children}</ChatContext.Provider>
		</FuegoProvider>
	)
}

export default Provider
