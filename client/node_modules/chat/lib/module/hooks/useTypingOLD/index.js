import _defineProperty from"@babel/runtime/helpers/defineProperty";import{useEffect,useRef}from'react';import{Room}from'../../index';import{fuego}from'../../components/ChatProvider';export default(function(config){var delay=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1500;var _config$text=config.text,text=_config$text===void 0?'':_config$text,id=config.id;var _ref=new Room({id:id}),path=_ref.path;var ref=fuego.db.doc(path);var timer=useRef();var user=fuego.auth().currentUser;var uid=user&&user.uid||'tester_name';var mounted=useRef(false);var lastTyped=useRef(0);useEffect(function(){try{if(mounted.current){var typedAt=Date.now();lastTyped.current=typedAt;ref.update(_defineProperty({},"members."+uid+".typing",true));timer.current=setTimeout(function(){ref.update(_defineProperty({},"members."+uid+".typing",false));},delay);}else{mounted.current=true;}}catch(e){console.error('use typing update error',e);}return function(){if(timer.current)clearTimeout(timer.current);};},[text,uid,delay,path]);useEffect(function(){return function(){try{ref.update(_defineProperty({},"members."+uid+".typing",false));}catch(e){console.error('unmount usetyping error',e);}};},[]);});
//# sourceMappingURL=index.js.map