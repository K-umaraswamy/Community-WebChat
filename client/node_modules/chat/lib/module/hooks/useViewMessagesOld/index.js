import{useRef,useMemo,useCallback,useEffect}from'react';import Room from'../../classes/Room';export default function(_ref){var messages=_ref.messages,roomId=_ref.roomId;var lastMessageId=useRef(null);var formatted=useMemo(function(){return messages||[];},[messages]);var messagesRef=useRef([]);var roomIdRef=useRef('');useEffect(function(){roomIdRef.current=roomId;messagesRef.current=formatted;},[formatted,roomId]);var onViewableItemsChanged=useCallback(function(info){info.viewableItems.forEach(function(item){if(!item.isViewable)return;var message=item.item;var id=message.id;var mostRecentMessageId=messagesRef.current[0].id;if(id===mostRecentMessageId&&lastMessageId.current!==id){lastMessageId.current=id;new Room({id:roomIdRef.current}).viewMessage(id,message.createdAt);}});},[]);return onViewableItemsChanged;}
//# sourceMappingURL=index.js.map