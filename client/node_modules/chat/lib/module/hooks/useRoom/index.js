import _defineProperty from"@babel/runtime/helpers/defineProperty";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import{useFuego}from'@nandorojo/fuego';import Room from'../../classes/Room';import{useMemo}from'react';export default(function(_ref){var id=_ref.id,config=_objectWithoutProperties(_ref,["id"]);var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var _ref2=new Room({id:id}),path=_ref2.path;var _useFuego=useFuego(_objectSpread({},config,{path:path}),options),data=_useFuego.data,loading=_useFuego.loading,error=_useFuego.error,ref=_useFuego.ref;var create=function create(room){return new Room(room).createViaCallable();};var edit=function edit(room){return new Room(room).edit();};var members=data&&data.members;var usersAreTyping=useMemo(function(){return!!(members&&new Room({members:members}).getUsersTyping().length);},[members]);var namesOfUsersTyping=useMemo(function(){return members&&new Room({members:members}).getUsersTyping().map(function(user){return user.name;})||[];},[members]);var room=useMemo(function(){function isDocument(r){return!!r;}if(data&&isDocument(data)){var model=_objectSpread({},data,{lastMessage:_objectSpread({},data.lastMessage,{createdAt:data.lastMessage.createdAt.toDate()})});return model;}return null;},[data]);return{data:room,loading:loading,error:error,ref:ref,create:create,edit:edit,usersAreTyping:usersAreTyping,namesOfUsersTyping:namesOfUsersTyping};});
//# sourceMappingURL=index.js.map