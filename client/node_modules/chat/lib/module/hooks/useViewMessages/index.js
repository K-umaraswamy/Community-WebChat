import{useRef,useCallback,useEffect}from'react';import Room from'../../classes/Room';export default function(config){var methods=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var roomId=config.roomId;var lastUploadedMessageId=useRef(null);var onViewMessages=methods.onViewMessages;var roomIdRef=useRef(roomId);var onViewMessagesRef=useRef(onViewMessages);useEffect(function(){roomIdRef.current=roomId;if(onViewMessages)onViewMessagesRef.current=onViewMessages;},[roomId,onViewMessages]);return useCallback(function(_ref){var visibleMessages=_ref.visibleMessages,latestMessageId=_ref.latestMessageId;var message=visibleMessages&&visibleMessages.find(function(i){return i.id===latestMessageId;});if(visibleMessages&&visibleMessages.length&&onViewMessagesRef.current){onViewMessagesRef.current({visibleMessages:visibleMessages});}if(message&&message.id!==lastUploadedMessageId.current){lastUploadedMessageId.current=message.id;new Room({id:roomIdRef.current}).viewMessage(message.id,message.createdAt);}},[]);}
//# sourceMappingURL=index.js.map