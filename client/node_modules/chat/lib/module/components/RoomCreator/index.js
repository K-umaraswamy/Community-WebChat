import _extends from"@babel/runtime/helpers/extends";import _defineProperty from"@babel/runtime/helpers/defineProperty";import _objectWithoutProperties from"@babel/runtime/helpers/objectWithoutProperties";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";var _jsxFileName="/Users/Fernando/Developer/Learning Babel/usechat/src/components/RoomCreator/index.tsx";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return typeof key==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(typeof input!=="object"||input===null)return input;var prim=input[typeof Symbol==="function"?Symbol.toPrimitive:"@@toPrimitive"];if(prim!==undefined){var res=prim.call(input,hint||"default");if(typeof res!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}import React,{useMemo,useRef,useState,useEffect}from'react';import BottomSheet from'reanimated-bottom-sheet';import Header from'./Header';import Content from'./Content';import Animated from'react-native-reanimated';var Value=Animated.Value,useCode=Animated.useCode,block=Animated.block,cond=Animated.cond,eq=Animated.eq,call=Animated.call,and=Animated.and;var initialSelected={};function RoomCreator(props){var sheetRef=useRef(null);var callbackNode=useMemo(function(){return props.callbackNode||new Value(1);},[props.callbackNode]);var _useState=useState(initialSelected),_useState2=_slicedToArray(_useState,2),selectedState=_useState2[0],setSelected=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),text=_useState4[0],setText=_useState4[1];var ref=props.sheetRef!==undefined?props.sheetRef:sheetRef;var selected=props.selected||selectedState;var ready=useMemo(function(){return props.isReadyFunc?props.isReadyFunc(selected):!!Object.keys(selected).filter(Boolean).length;},[props,selected]);var mounted=useRef(0);useCode(function(){return block([cond(eq(callbackNode,1),call([],onDidClose),cond(and(eq(callbackNode,0),(mounted.current,1)),call([],onDidOpen)))]);},[callbackNode,onDidClose,onDidOpen]);useEffect(function(){if(!mounted.current)mounted.current=1;},[]);function reset(){setSelected(initialSelected);setText('');}var toggleSelected=function toggleSelected(id){if(props.onSelectItem)return props.onSelectItem(id);setSelected(function(currentlySelected){var user=props.users.find(function(u){return u.id===id;});if(currentlySelected[id]||!user){var pressed=currentlySelected[id],ommitted=_objectWithoutProperties(currentlySelected,[id].map(_toPropertyKey));return ommitted;}return _objectSpread({},currentlySelected,_defineProperty({},id,user.type));});};var open=function open(){return ref.current&&ref.current.snapTo(1);};var close=function close(){return ref.current&&ref.current.snapTo(0);};if(props.creatorRef){props.creatorRef.current={open:open,close:close};}function onDidClose(){if(props.onDidClose)props.onDidClose();reset();}function onDidOpen(){if(props.onDidOpen)props.onDidOpen();}var renderHeader=function renderHeader(){var headerProps={callbackNode:callbackNode,image:props.headerImage,imageStyle:props.headerImageStyle,subtitle:props.headerSubtitle,subtitleStyle:props.headerSubtitleStyle,title:props.headerTitle||'New Message',titleStyle:props.headerTitleStyle,backgroundColor:props.headerBackgroundColor||'#f8f8f8',containerStyle:props.headerContainerStyle};if(props.renderHeader)return props.renderHeader(headerProps);if(props.renderHeader===null)return null;return React.createElement(Header,_extends({},headerProps,{__source:{fileName:_jsxFileName,lineNumber:121}}));};var renderContent=function renderContent(){var contentProps={toggleSelected:toggleSelected,selected:selected,renderFooter:props.renderFooter,buttons:props.buttons,renderButton:props.renderButton,ButtonComponent:props.ButtonComponent,users:props.users,renderItem:props.renderItem,ready:ready,renderSelectedIcon:props.renderSelectedIcon,selectedIconActiveColor:props.selectedIconActiveColor,selectedIconInactiveColor:props.selectedIconInactiveColor,enableTextInput:props.enableTextInput,inputContainerStyle:props.inputContainerStyle,inputStyle:props.inputStyle,showInputWhenNotReady:props.showInputWhenNotReady,inputProps:props.inputProps,onChangeText:setText,text:text};if(props.renderContent)return props.renderContent(contentProps);if(props.renderContent===null)return null;return React.createElement(Content,_extends({},contentProps,{__source:{fileName:_jsxFileName,lineNumber:149}}));};var snapPoints=useMemo(function(){return props.snapPoints||['0%','90%'];},[props.snapPoints]);var initialSnap=props.startOpen?1:0;var renderSheet=function renderSheet(){return React.createElement(BottomSheet,_extends({initialSnap:initialSnap},props.sheetProps,{renderHeader:renderHeader,renderContent:renderContent,snapPoints:snapPoints,callbackNode:callbackNode,ref:ref},{__source:{fileName:_jsxFileName,lineNumber:160}}));};return React.createElement(React.Fragment,null,renderSheet());}export default RoomCreator;
//# sourceMappingURL=index.js.map