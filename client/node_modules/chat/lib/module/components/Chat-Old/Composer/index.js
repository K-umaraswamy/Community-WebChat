import _defineProperty from"@babel/runtime/helpers/defineProperty";import _extends from"@babel/runtime/helpers/extends";import _slicedToArray from"@babel/runtime/helpers/slicedToArray";var _jsxFileName="/Users/Fernando/Developer/Learning Babel/usechat/src/components/Chat-Old/Composer/index.tsx";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useState,useCallback,useMemo}from'react';import uuid from'uuid';import{View,StyleSheet}from'react-native';import Input from'./Input';import Send from'./Send';var emptyMedia=[];export default React.memo(function(props){var _useState=useState(props.initialText||''),_useState2=_slicedToArray(_useState,2),textState=_useState2[0],setText=_useState2[1];var _ref=[props.text||textState,props.text&&props.onInputTextChanged||setText],text=_ref[0],onChangeText=_ref[1];var _useState3=useState(emptyMedia),_useState4=_slicedToArray(_useState3,2),mediaState=_useState4[0],setMedia=_useState4[1];var _ref2=[props.media||mediaState,props.media&&props.onChangeMedia||setMedia],media=_ref2[0],onChangeMedia=_ref2[1];var textInputProps=props.textInputProps,renderTextInput=props.renderTextInput;var renderInput=useCallback(function(){if(renderTextInput===null)return null;var inputProps={inputProps:textInputProps,onChangeText:onChangeText,text:text,containerStyle:props.inputContainerStyle,placeholderColor:props.placeholderColor,placeholderText:props.placeholderText,style:props.inputStyle,tintColor:props.tintColor,inputRef:props.inputRef};if(renderTextInput)return renderTextInput(inputProps);return React.createElement(Input,_extends({},inputProps,{__source:{fileName:_jsxFileName,lineNumber:44}}));},[onChangeText,text,textInputProps,renderTextInput,props.inputContainerStyle,props.placeholderColor,props.placeholderText,props.inputStyle,props.tintColor,props.inputRef]);var user=props.user;var messagesReadyToSend=useMemo(function(){var messages=[];if(media.length){;media.forEach(function(item){var message={user:user,text:'',id:uuid.v4(),createdAt:new Date(),media:item};messages.push(message);});}if(text){var message={user:user,text:text&&text.trim(),id:uuid.v4(),createdAt:new Date()};messages.push(message);}return messages;},[user,text,media]);var onSend=props.onSend;var send=useCallback(function(){if(messagesReadyToSend.length){onChangeText('');onChangeMedia([]);onSend(messagesReadyToSend);}},[onChangeText,onChangeMedia,messagesReadyToSend,onSend]);var renderSendButton=props.renderSendButton,sendButtonMode=props.sendButtonMode;var renderSend=useCallback(function(){if(renderSendButton===null)return null;var mode=_objectSpread({empty:'hidden',withText:'icon'},sendButtonMode||{});var sendProps={onSend:send,text:text,media:media,user:user,mode:(text&&text.trim?mode.withText:mode.empty)||'icon'};if(renderSendButton)return renderSendButton(sendProps);return React.createElement(Send,_extends({},sendProps,{__source:{fileName:_jsxFileName,lineNumber:113}}));},[send,text,user,media,renderSendButton,sendButtonMode]);return React.createElement(View,{style:props.containerStyle,__source:{fileName:_jsxFileName,lineNumber:117}},React.createElement(View,{style:styles.wrapper,__source:{fileName:_jsxFileName,lineNumber:118}},renderInput(),renderSend()));});var styles=StyleSheet.create({container:{},wrapper:{flexDirection:'row'}});
//# sourceMappingURL=index.js.map