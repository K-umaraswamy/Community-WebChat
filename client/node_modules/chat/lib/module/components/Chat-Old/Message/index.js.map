{"version":3,"sources":["index.tsx"],"names":["React","useCallback","useRef","useMemo","View","StyleSheet","Text","Bubble","Avatar","Initials","getInitials","Message","props","bubble","renderFooter","footer","id","containerStyle","styles","container","isMe","meStyles","otherStyles","messageContainerStyle","wrapperStyle","wrapper","messageWrapperStyle","maybeRenderName","showName","name","renderAvatar","avatar","avatarImageProps","avatarSize","showAvatar","renderInitials","initialsBackgroundColor","initialsTextColor","renderAvatarOrInitials","opacity","size","Container","children","avatarProps","imageProps","initialsProps","initials","textColor","backgroundColor","tintColor","text","bubbleStyle","bubbleTextStyle","memo","create","marginTop","flexDirection","flex","marginLeft","justifyContent"],"mappings":"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","sourcesContent":["import React, {\n\tuseCallback,\n\tuseRef,\n\tMutableRefObject,\n\tuseMemo,\n\tFunctionComponent\n} from 'react'\nimport { View, StyleSheet, Text } from 'react-native'\nimport { MessageProps } from '../types'\nimport { NewMessageModel } from '../../../classes/Message/types'\nimport Bubble from '../Bubble'\nimport { Avatar, Initials } from '../..'\nimport { AvatarProps, InitialsProps } from '../../Inbox/types'\nimport { getInitials } from '../../../helpers/getInitials'\n\nconst Message = <Model extends NewMessageModel = NewMessageModel>(\n\tprops: MessageProps<Model>\n) => {\n\tconst bubble = useRef<View>()\n\n\tconst { renderFooter } = props\n\tconst footer = useCallback(\n\t\t() => (renderFooter ? renderFooter({ id: props.id }) : null),\n\t\t[props.id, renderFooter]\n\t)\n\n\tconst containerStyle = useMemo(() => {\n\t\treturn [\n\t\t\tstyles.container,\n\t\t\tprops.isMe ? meStyles.container : otherStyles.container,\n\t\t\tprops.messageContainerStyle\n\t\t]\n\t}, [props.isMe, props.messageContainerStyle])\n\n\tconst wrapperStyle = useMemo(() => {\n\t\treturn [\n\t\t\tstyles.wrapper,\n\t\t\tprops.isMe ? meStyles.wrapper : otherStyles.wrapper,\n\t\t\tprops.messageWrapperStyle\n\t\t]\n\t}, [props.isMe, props.messageWrapperStyle])\n\n\tconst maybeRenderName = useCallback(() => {\n\t\treturn props.showName && props.name ? (\n\t\t\t<Text style={styles.name}>{props.name}</Text>\n\t\t) : null\n\t}, [props.showName, props.name])\n\n\tconst {\n\t\trenderAvatar,\n\t\tavatar,\n\t\tavatarImageProps,\n\t\tavatarSize,\n\t\tshowAvatar,\n\t\tname,\n\t\trenderInitials,\n\t\tinitialsBackgroundColor,\n\t\tinitialsTextColor\n\t} = props\n\tconst renderAvatarOrInitials = useCallback(() => {\n\t\tif (renderAvatar === null) return null\n\t\t// we make opacity 0 instead of hiding it to maintain the same width from the side\n\t\tconst opacity = showAvatar === false ? 0 : 1\n\t\tconst size = avatarSize || 40\n\n\t\tconst Container: FunctionComponent<{}> = ({ children }) => (\n\t\t\t<View style={{ opacity }}>{children}</View>\n\t\t)\n\n\t\tif (avatar) {\n\t\t\tconst avatarProps: AvatarProps = {\n\t\t\t\tavatar: avatar,\n\t\t\t\timageProps: avatarImageProps,\n\t\t\t\tsize\n\t\t\t}\n\t\t\tif (renderAvatar) return renderAvatar(avatarProps)\n\t\t\treturn (\n\t\t\t\t<Container>\n\t\t\t\t\t<Avatar {...avatarProps} />\n\t\t\t\t</Container>\n\t\t\t)\n\t\t}\n\t\tconst initialsProps: InitialsProps = {\n\t\t\tinitials: getInitials(name),\n\t\t\tsize,\n\t\t\ttextColor: initialsTextColor,\n\t\t\tbackgroundColor: initialsBackgroundColor || props.tintColor\n\t\t}\n\t\tif (renderInitials) return renderInitials(initialsProps)\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<Initials {...initialsProps} />\n\t\t\t</Container>\n\t\t)\n\t}, [\n\t\tavatar,\n\t\tavatarImageProps,\n\t\tavatarSize,\n\t\trenderAvatar,\n\t\tshowAvatar,\n\t\tname,\n\t\trenderInitials,\n\t\tinitialsBackgroundColor,\n\t\tinitialsTextColor,\n\t\tprops.tintColor\n\t])\n\n\treturn (\n\t\t<View style={containerStyle}>\n\t\t\t<View style={wrapperStyle}>\n\t\t\t\t{renderAvatarOrInitials()}\n\t\t\t\t<View>\n\t\t\t\t\t{maybeRenderName()}\n\t\t\t\t\t<Bubble\n\t\t\t\t\t\ttext={props.text}\n\t\t\t\t\t\tisMe={props.isMe}\n\t\t\t\t\t\tstyle={props.bubbleStyle}\n\t\t\t\t\t\ttextStyle={props.bubbleTextStyle}\n\t\t\t\t\t\tbubbleRef={bubble as MutableRefObject<View>}\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</View>\n\t\t\t{footer()}\n\t\t</View>\n\t)\n}\n\nexport default React.memo(Message)\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n\t\tmarginTop: 1,\n\t\tflexDirection: 'row'\n\t},\n\t// wrapper is concerned with which side the avatar is on relative to the bubble\n\twrapper: {\n\t\tflex: 1\n\t},\n\tname: {\n\t\tmarginLeft: 5\n\t}\n})\n\nconst meStyles = StyleSheet.create({\n\tcontainer: {\n\t\tjustifyContent: 'flex-end'\n\t},\n\twrapper: {\n\t\tflexDirection: 'row-reverse'\n\t}\n})\n\nconst otherStyles = StyleSheet.create({\n\tcontainer: {\n\t\tjustifyContent: 'flex-end'\n\t},\n\twrapper: {\n\t\tflexDirection: 'row'\n\t}\n})\n"]}