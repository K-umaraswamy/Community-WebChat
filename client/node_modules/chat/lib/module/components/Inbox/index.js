import _extends from"@babel/runtime/helpers/extends";var _jsxFileName="/Users/Fernando/Developer/Learning Babel/usechat/src/components/Inbox/index.tsx";import React,{useRef,useEffect}from'react';import{Animated,StyleSheet,SafeAreaView}from'react-native';import Item from'./Item';import Room from'../../classes/Room';import{getInitials}from'../../helpers/getInitials';import Separator from'./Item/Separator';import Reanimated,{Transitioning,Transition}from'react-native-reanimated';export default function(props){var transitionRef=useRef(null);var numberOfRoomsWithUsersTyping=(props.rooms||[]).filter(function(room){return new Room(room).getUsersTyping().length;}).length;useEffect(function(){if(props.enableRoomTransitions!==false&&transitionRef.current)transitionRef.current.animateNextTransition();},[props.rooms,props.enableRoomTransitions,numberOfRoomsWithUsersTyping]);var scrollY=props.animatedScrollNode||new Animated.Value(0);var onScroll=Animated.event([{nativeEvent:{contentOffset:{y:scrollY}}}],{useNativeDriver:true});function renderList(){function keyExtractor(item,index){return props.keyExtractor?props.keyExtractor(item,index):item&&item.id||index.toString();}return React.createElement(Animated.FlatList,_extends({onScroll:onScroll,extraData:props.extraData,contentContainerStyle:styles.contentContainer,ItemSeparatorComponent:function ItemSeparatorComponent(){return React.createElement(Separator,{size:props.separatorSize,color:props.separatorColor,__source:{fileName:_jsxFileName,lineNumber:61}});}},props.flatListProps,{keyExtractor:keyExtractor,renderItem:renderItem,data:props.rooms,__source:{fileName:_jsxFileName,lineNumber:56}}));}function renderHeader(){var headerProps={scrollY:scrollY,big:props.bigHeader!==false,onPressNewRoom:props.onPressNewRoom};if(props.renderHeader)return props.renderHeader(headerProps);if(props.renderHeader===null)return null;var HeaderComponent=props.HeaderComponent||Animated.View;return React.createElement(HeaderComponent,_extends({},headerProps,{__source:{fileName:_jsxFileName,lineNumber:83}}));}function renderFooter(){var footerProps={scrollY:scrollY};if(props.renderFooter)return props.renderFooter(footerProps);if(props.renderFooter===null)return null;var FooterComponent=props.FooterComponent||Animated.View;return React.createElement(FooterComponent,_extends({},footerProps,{__source:{fileName:_jsxFileName,lineNumber:97}}));}function renderItem(itemInfo){if(props.renderItem===null)return null;if(props.renderItem)return props.renderItem(itemInfo);var maxNumberOfInitials=props.maxNumberOfInitials||2;var _itemInfo$item=itemInfo.item,lastMessage=_itemInfo$item.lastMessage,members=_itemInfo$item.members,id=_itemInfo$item.id,_itemInfo$item$unread=_itemInfo$item.unreadCount,unreadCount=_itemInfo$item$unread===void 0?0:_itemInfo$item$unread,_itemInfo$item$name=_itemInfo$item.name,roomName=_itemInfo$item$name===void 0?'':_itemInfo$item$name;var room=new Room({members:members,id:id,name:roomName});var name=props.roomNameFunc?props.roomNameFunc({members:members,name:roomName}):room.getName();var roomAvatar=itemInfo.item.avatar;var avatar=roomAvatar||'';var initials=props.roomInitialsFunc?props.roomInitialsFunc({members:members,name:name,maxNumberOfInitials:maxNumberOfInitials}):room.getInitials(maxNumberOfInitials);var otherMembers=room.getArrayOfMembersOtherThanMe();if(props.prioritizeAvatarOverInitials&&!roomName){if(!avatar&&otherMembers.length===1&&otherMembers[0]){avatar=otherMembers[0]&&otherMembers[0].avatar||'';}if(otherMembers.length>1&&!roomAvatar&&props.fallbackToMultipleAvatarsIfNoGroupAvatar!==false){avatar=otherMembers.map(function(member){return{initials:getInitials(member.name,props.maxNumberOfInitials),avatar:member.avatar||''};}).sort(function(a,b){return a.avatar>b.avatar?1:-1;});}}var onPress=function onPress(pointerInside){return props.onPressItem?props.onPressItem(id,pointerInside):console.log(id,'pressed. change onPressItem prop on the <Inbox /> component to handle this function.');};var onLongPress=function onLongPress(pointerInside){return props.onLongPressItem?props.onLongPressItem(id,pointerInside):console.log('long pressed ',id,'edit onLongPressItem prop to handle this function');};var itemProps={lastMessageCreatedAt:lastMessage.createdAt,lastMessageText:lastMessage.text,avatar:avatar,name:name,initials:initials,onPress:onPress,unreadCount:unreadCount,renderTitle:props.renderItemTitle,renderDate:props.renderItemDate,TitleComponent:props.ItemTitleComponent,titleStyle:props.titleStyle,titleContainerStyle:props.titleContainerStyle,DateComponent:props.ItemDateComponent,unreadIndicatorColor:props.unreadIndicatorColor,unreadTextColor:props.unreadTextColor,showUnreadIndicator:props.showUnreadIndicator!==false,showUnreadIndicatorCount:props.showUnreadIndicatorCount!==false,UnreadIndicatorComponent:props.UnreadIndicatorComponent,renderUnreadIndicator:props.renderUnreadIndicator,unreadIndicatorStyle:props.unreadIndicatorStyle,unreadIndicatorTextStyle:props.unreadIndicatorTextStyle,unreadIndicatorPosition:props.unreadIndicatorPostion,dateToStringFunc:props.dateToStringFunc,onLongPress:onLongPress,prioritizeAvatarOverInitials:props.prioritizeAvatarOverInitials!==false,renderAvatar:props.renderAvatar,renderInitials:props.renderInitials,renderSubtitle:props.renderItemSubtitle,SubtitleComponent:props.ItemSubtitleComponent,subtitleTextStyle:props.itemSubtitleTextStyle,AvatarComponent:props.ItemAvatarComponent,InitialsComponent:props.ItemInitialsComponent,roomInitialsFunc:props.roomInitialsFunc,avatarImageProps:props.avatarImageProps,avatarSize:props.avatarSize,initialsContainerStyle:props.initialsContainerStyle,initialsTextStyle:props.initialsTextStyle,disableAvatar:props.disableAvatar,initialsBackgroundColor:props.initialsBackgroundColor,initialsTextColor:props.initialsTextColor,swipeable:props.swipeableRow!==false,id:id,renderSwipeAction:props.renderSwipeAction,swipeLeftActions:props.swipeLeftActions,swipeRightActions:props.swipeRightActions,swipeActionWidth:props.swipeActionWidth,backgroundColor:props.itemBackgroundColor||'white',swipeableRowProps:props.swipeableRowProps,unreadIndicatorType:props.unreadIndicatorType,unreadIndicatorGradientProps:props.unreadIndicatorGradientProps,unreadIndicatorSize:props.unreadIndicatorSize,containerStyle:props.itemContainerStyle,dateStyle:props.dateStyle,renderLeftActions:props.renderLeftActions,renderRightActions:props.renderRightActions,actionTextStyle:props.actionTextStyle,showTypingIndicator:props.showTypingIndicator!==false,renderTypingIndicator:props.renderTypingIndicator,numberOfPeopleTyping:room.getUsersTyping().length};if(props.renderItemWithProps)return props.renderItemWithProps(itemProps);var InboxItemComponent=props.InboxItemComponent||Item;return React.createElement(InboxItemComponent,_extends({},itemProps,{__source:{fileName:_jsxFileName,lineNumber:269}}));}var Container=props.ContainerComponent||(props.safeArea?Reanimated.createAnimatedComponent(SafeAreaView):Reanimated.View);var containerStyles=[styles.container,props.containerStyle];var transition=props.roomTransitionConfig||React.createElement(Transition.Together,{__source:{fileName:_jsxFileName,lineNumber:284}},React.createElement(Transition.Change,{interpolation:"easeInOut",durationMs:400,propagation:"top",__source:{fileName:_jsxFileName,lineNumber:285}}));return React.createElement(Transitioning.View,{transition:transition,ref:transitionRef,style:containerStyles,__source:{fileName:_jsxFileName,lineNumber:294}},React.createElement(Container,{style:containerStyles,__source:{fileName:_jsxFileName,lineNumber:299}},renderHeader(),renderList(),renderFooter()));}var styles=StyleSheet.create({container:{flex:1},contentContainer:{flexGrow:1}});
//# sourceMappingURL=index.js.map