import _extends from"@babel/runtime/helpers/extends";import _defineProperty from"@babel/runtime/helpers/defineProperty";var _jsxFileName="/Users/Fernando/Developer/Learning Babel/usechat/src/components/Chat/Message/index.tsx";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{useCallback,useRef,useMemo,useEffect}from'react';import{View,StyleSheet,Text}from'react-native';import Bubble from'../Bubble';import{Avatar,Initials}from'../../index';import{getInitials}from'../../../helpers/getInitials';import{Transitioning,Transition}from'react-native-reanimated';import Touchable from'./Touchable';var Message=function Message(props){var bubble=useRef();var transitionRef=useRef();var mounted=useRef(false);var renderAvatar=props.renderAvatar,avatar=props.avatar,avatarImageProps=props.avatarImageProps,showAvatar=props.showAvatar,name=props.name,renderInitials=props.renderInitials,initialsBackgroundColor=props.initialsBackgroundColor,initialsTextColor=props.initialsTextColor;useEffect(function(){if(mounted.current){transitionRef.current&&transitionRef.current.animateNextTransition();}else{mounted.current=true;}},[props.avatar,props.text,renderAvatar]);var renderFooter=props.renderFooter;var footer=useCallback(function(){return renderFooter?renderFooter({id:props.id}):null;},[props.id,renderFooter]);var containerStyle=useMemo(function(){return[styles.container,props.isMe?meStyles.container:otherStyles.container,props.messageContainerStyle];},[props.isMe,props.messageContainerStyle]);var wrapperStyle=useMemo(function(){return[styles.wrapper,props.isMe?meStyles.wrapper:otherStyles.wrapper,props.messageWrapperStyle];},[props.isMe,props.messageWrapperStyle]);var avatarSize=renderAvatar===null?0:props.avatarSize||35;var maybeRenderName=useCallback(function(){var style=_objectSpread({},styles.name,{},props.isMe?meStyles.name:otherStyles.name);return props.showName&&props.name?React.createElement(Text,{style:[style,props.nameStyle],__source:{fileName:_jsxFileName,lineNumber:87}},props.name):null;},[props.showName,props.name,props.nameStyle,props.isMe]);var renderAvatarOrInitials=useCallback(function(){if(renderAvatar===null)return null;var opacity=showAvatar===false?0:1;var size=avatarSize;if(avatar){var avatarProps={avatar:avatar,imageProps:avatarImageProps,size:size,ImageComponent:props.AvatarImageComponent};if(renderAvatar)return renderAvatar(avatarProps);return React.createElement(AvatarContainer,{opacity:opacity,showAvatar:!!showAvatar,__source:{fileName:_jsxFileName,lineNumber:106}},React.createElement(Avatar,_extends({},avatarProps,{__source:{fileName:_jsxFileName,lineNumber:107}})));}var initialsProps={initials:getInitials(name),size:size,textColor:initialsTextColor,backgroundColor:initialsBackgroundColor||props.tintColor};if(renderInitials)return renderInitials(initialsProps);return React.createElement(AvatarContainer,{opacity:opacity,showAvatar:!!showAvatar,__source:{fileName:_jsxFileName,lineNumber:119}},React.createElement(Initials,_extends({},initialsProps,{__source:{fileName:_jsxFileName,lineNumber:120}})));},[avatar,avatarImageProps,avatarSize,renderAvatar,showAvatar,name,renderInitials,initialsBackgroundColor,initialsTextColor,props.tintColor,props.AvatarImageComponent]);var bubbleBackgroundColor=props.bubbleBackgroundColor,id=props.id,userId=props.userId,userName=props.userName,createdAt=props.createdAt,text=props.text,system=props.system;var backgroundColor=useMemo(function(){var fallback=props.isMe?['#7B16FF','#7114EA']:['#f1f7f8','#f8f8f8'];if(!bubbleBackgroundColor)return fallback;var colors=[];if(typeof bubbleBackgroundColor==='string'){colors=[bubbleBackgroundColor,bubbleBackgroundColor];}else if(Array.isArray(bubbleBackgroundColor)){colors=bubbleBackgroundColor;}else if(typeof bubbleBackgroundColor==='function'){var background=bubbleBackgroundColor({createdAt:createdAt,id:id,user:{name:userName!=null?userName:'',id:userId!=null?userId:'',avatar:avatar!=null?avatar:''},text:text,system:system});if(Array.isArray(background)){colors=background;}else if(typeof background==='string'){colors=[background,background];}}if(!colors.length){console.warn("\uD83C\uDF47 Juice.Chat issue: It looks like you tried to set the message bubble background color, but something was off, so we're using the default colors. You should be passing either a string, array, or function to the bubbleBackgroundColor, like this: bubbleBackgroundColor={{ "+(props.isMe?'me':'others')+": 'blue' }}. Instead, you passed this: "+bubbleBackgroundColor+".");return fallback;}return colors;},[props.isMe,bubbleBackgroundColor,createdAt,id,userName,userId,avatar,text,system]);var renderBubble=function renderBubble(){return React.createElement(Bubble,{text:props.text,isMe:props.isMe,style:props.bubbleStyle,textStyle:props.bubbleTextStyle,bubbleRef:bubble,backgroundColor:backgroundColor,textColor:props.bubbleTextColor,mediaContentType:props.mediaContentType,mediaHeight:props.mediaHeight,mediaWidth:props.mediaWidth,mediaUri:props.mediaUri,mediaUrl:props.mediaUrl,renderMedia:props.renderMedia,renderText:props.renderText,__source:{fileName:_jsxFileName,lineNumber:204}});};var outerStyle=useMemo(function(){return props.createsNewBunch?{marginTop:10}:{};},[props.createsNewBunch]);return React.createElement(Touchable,{id:props.id,longPressDelay:props.longPressDelay,doubleTapDelay:props.doubleTapDelay,onDoubleTap:props.onDoubleTap,onPress:props.onPress,onLongPress:props.onLongPress,__source:{fileName:_jsxFileName,lineNumber:227}},React.createElement(Transitioning.View,{style:outerStyle,transition:transition,ref:transitionRef,__source:{fileName:_jsxFileName,lineNumber:235}},React.createElement(View,{style:containerStyle,__source:{fileName:_jsxFileName,lineNumber:240}},React.createElement(View,{style:wrapperStyle,__source:{fileName:_jsxFileName,lineNumber:241}},renderAvatarOrInitials(),React.createElement(View,{style:{flex:1,justifyContent:'flex-start'},__source:{fileName:_jsxFileName,lineNumber:243}},maybeRenderName(),React.createElement(View,{style:wrapperStyle,__source:{fileName:_jsxFileName,lineNumber:245}},renderBubble()))),footer())));};var transition=React.createElement(Transition.Together,{__source:{fileName:_jsxFileName,lineNumber:258}},React.createElement(Transition.Change,{interpolation:"easeOut",__source:{fileName:_jsxFileName,lineNumber:259}}),React.createElement(Transition.In,{type:"fade",__source:{fileName:_jsxFileName,lineNumber:260}}));var AvatarContainer=React.memo(function AvatarContainer(_ref){var children=_ref.children,opacity=_ref.opacity;return React.createElement(View,{style:{opacity:opacity},__source:{fileName:_jsxFileName,lineNumber:270}},children);});Message.displayName='Message';export default React.memo(Message);var styles=StyleSheet.create({outer:{},container:{marginTop:1,alignItems:'flex-end',paddingHorizontal:10},wrapper:{flex:1,alignItems:'flex-end',justifyContent:'flex-start'},name:{marginHorizontal:10,fontSize:14,color:'gray',paddingVertical:5}});var meStyles=StyleSheet.create({container:{justifyContent:'flex-end'},wrapper:{flexDirection:'row-reverse'},name:{textAlign:'right'}});var otherStyles=StyleSheet.create({container:{justifyContent:'flex-end'},wrapper:{flexDirection:'row'},name:{textAlign:'left'}});
//# sourceMappingURL=index.js.map