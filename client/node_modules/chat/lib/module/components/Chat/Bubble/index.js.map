{"version":3,"sources":["index.tsx"],"names":["React","useMemo","useCallback","View","Text","StyleSheet","LinearGradient","Media","isValidColor","color","test","Bubble","props","containerStyles","styles","container","isMe","meStyles","otherStyles","style","textStyles","textColor","text","textStyle","backgroundColor","Array","isArray","invalidColors","from","Set","filter","length","console","warn","propsRenderMedia","renderMedia","mediaContentType","media","url","mediaUrl","uri","mediaUri","height","mediaHeight","width","mediaWidth","contentType","propsRenderText","renderText","bubbleRef","gradient","memo","create","maxWidth","borderRadius","overflow","textAlign","fontSize","paddingHorizontal","paddingVertical","flex","marginLeft","marginRight"],"mappings":"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","sourcesContent":["import React, { useMemo, FunctionComponent, useCallback } from 'react'\nimport { BubbleProps } from '../types'\nimport { View, Text, StyleSheet } from 'react-native'\nimport { LinearGradient } from 'expo-linear-gradient'\nimport { MessageMedia } from '../../../classes/Message/types'\nimport Media from '../Media'\n\nconst isValidColor = (color: string) =>\n\t/(#(?:[0-9a-f]{ 2 }){ 2,4 }|(#[0-9a-f]{3})|(rgb|hsl)a?\\((-?\\d+%?[,\\s]+){2,3}\\s*[d\\.]+%?\\)|\\b(transparent|black|silver|gray|whitesmoke|maroon|red|purple|fuchsia|green|lime|olivedrab|yellow|navy|blue|teal|aquamarine|orange|aliceblue|antiquewhite|aqua|azure|beige|bisque|blanchedalmond|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|gainsboro|ghostwhite|goldenrod|gold|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavenderblush|lavender|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|limegreen|linen|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|oldlace|olive|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|thistle|tomato|turquoise|violet|wheat|white|yellowgreen|rebeccapurple)\\b)/i.test(\n\t\tcolor\n\t)\n\nconst Bubble: FunctionComponent<BubbleProps> = props => {\n\tconst containerStyles = useMemo(() => {\n\t\treturn [\n\t\t\tstyles.container,\n\t\t\tprops.isMe ? meStyles.container : otherStyles.container,\n\t\t\tprops.style\n\t\t]\n\t}, [props.style, props.isMe])\n\n\tconst textStyles = useMemo(() => {\n\t\tconst color = (props.textColor && { color: props.textColor }) || {}\n\t\treturn [\n\t\t\tstyles.text,\n\t\t\tprops.isMe ? meStyles.text : otherStyles.text,\n\t\t\tcolor,\n\t\t\tprops.textStyle\n\t\t]\n\t}, [props.textStyle, props.isMe, props.textColor])\n\n\tconst backgroundColor = useMemo(() => {\n\t\tlet color: string[] = []\n\t\tif (Array.isArray(props.backgroundColor)) {\n\t\t\tcolor = props.backgroundColor\n\t\t}\n\t\tif (typeof props.backgroundColor === 'string') {\n\t\t\tcolor = [props.backgroundColor, props.backgroundColor]\n\t\t}\n\t\tconst invalidColors = [\n\t\t\t...Array.from(new Set(color.filter(color => !isValidColor(color))))\n\t\t]\n\t\tif (invalidColors.length) {\n\t\t\tconsole.warn(\n\t\t\t\t`🍏 Juice warning: The background color value you gave to the Bubble component doesn't seem to be valid. Each color should be a HEX color or CSS color string, matching this format: #abc123, but instead, it got these: ${invalidColors}, which don't match the format. If you gave a valid CSS color and it works, you can ignore this.`\n\t\t\t)\n\t\t}\n\t\treturn (\n\t\t\tcolor || (props.isMe ? ['#7B16FF', '#7114EA'] : ['#f1f7f8', '#f8f8f8'])\n\t\t)\n\t}, [props.backgroundColor, props.isMe])\n\n\tconst { renderMedia: propsRenderMedia } = props\n\tconst renderMedia = useCallback(() => {\n\t\tif (propsRenderMedia === null) return null\n\n\t\tif (!props.mediaContentType) return null\n\n\t\tconst media: MessageMedia = {\n\t\t\turl: props.mediaUrl || '',\n\t\t\turi: props.mediaUri,\n\t\t\theight: props.mediaHeight || 0,\n\t\t\twidth: props.mediaWidth || 0,\n\t\t\tcontentType: props.mediaContentType\n\t\t}\n\t\tif (propsRenderMedia) return propsRenderMedia({ media })\n\n\t\treturn <Media {...media} />\n\t}, [\n\t\tprops.mediaUrl,\n\t\tprops.mediaUri,\n\t\tprops.mediaHeight,\n\t\tprops.mediaWidth,\n\t\tprops.mediaContentType,\n\t\tpropsRenderMedia\n\t])\n\n\tconst { text, renderText: propsRenderText } = props\n\tconst renderText = useCallback(() => {\n\t\tif (text) {\n\t\t\tif (propsRenderText) return propsRenderText({ style: textStyles, text })\n\t\t\treturn <Text style={textStyles}>{text}</Text>\n\t\t}\n\t\treturn null\n\t}, [textStyles, text, propsRenderText])\n\n\treturn (\n\t\t<View style={containerStyles} ref={props.bubbleRef}>\n\t\t\t<LinearGradient\n\t\t\t\tcolors={backgroundColor}\n\t\t\t\tstart={[0.1, 0.1]}\n\t\t\t\tend={[0.9, 0.9]}\n\t\t\t\tstyle={styles.gradient}\n\t\t\t>\n\t\t\t\t{renderMedia()}\n\t\t\t\t{renderText()}\n\t\t\t</LinearGradient>\n\t\t</View>\n\t)\n}\n\nexport default React.memo(Bubble)\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n\t\tmaxWidth: '80%',\n\t\tborderRadius: 20,\n\t\toverflow: 'hidden'\n\t},\n\ttext: {\n\t\ttextAlign: 'left',\n\t\tfontSize: 16,\n\t\tpaddingHorizontal: 12,\n\t\tpaddingVertical: 10\n\t},\n\tgradient: {\n\t\tflex: 1\n\t}\n})\n\nconst meStyles = StyleSheet.create({\n\tcontainer: {\n\t\t// backgroundColor: 'rgb(123, 22, 255)',\n\t\tmarginLeft: 5\n\t},\n\ttext: {\n\t\tcolor: 'white'\n\t}\n})\n\nconst otherStyles = StyleSheet.create({\n\tcontainer: {\n\t\t// backgroundColor: 'lightgray',\n\t\tmarginRight: 5\n\t},\n\ttext: {\n\t\tcolor: 'black'\n\t}\n})\n"]}